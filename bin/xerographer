#!/usr/bin/env php
<?php

declare(strict_types=1);

namespace Jascha030;

use Jascha030\Xerox\Application\Application;
use Psr\Container\ContainerInterface;
use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\ArgvInput;
use Symfony\Component\Console\Output\ConsoleOutput;

$container = include dirname(__FILE__, 2) . '/includes/bootstrap.php';
$input     = new ArgvInput();
$output    = new ConsoleOutput();

if (!is_subclass_of($container, ContainerInterface::class)) {
    $output->writeln("Could not load the app container.");
    $output->writeln("Exiting application.");

    return Command::FAILURE;
}

$app = new Application($container);

try {
    $app->run($input, $output);
} catch (\Exception $e) {
    $output->writeln($e->getMessage());

    return Command::FAILURE;
}
